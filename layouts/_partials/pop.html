{{ $isPost := and (eq .Kind "page") (eq .Section "posts") }} {{ if $isPost }}

<div id="pop-wrapper">
    <a href="mailto:{{ .Site.Params.email }}?subject=Feedback on {{ .Title }}">
        Email me</a
    >
    or leave a reaction: <span id="pop"></span>
</div>
<hr />
{{ end }}
<script src="https://pop.eisenschmidt.website/pop.min.js" defer></script>
<script defer>
    document.addEventListener("DOMContentLoaded", function() {
        {{ $emojis := slice "❤️" }}
        {{ if and $isPost .Params.emojis }}
            {{ $emojis = append .Params.emojis $emojis  }}
        {{ end }}
        Pop.init({
            endpoint: "https://pop.eisenschmidt.website/api",
            pageId: {{ .Permalink }},
        {{ if $isPost }}
            el: "#pop",
            emojis: {{ $emojis | jsonify | safeJS }},
            renderReactions: true,
        {{ end }}
            trackVisits: true
        });
    });
</script>
