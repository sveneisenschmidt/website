{{ $description := .Description | default .Summary | default
.Site.Params.description }} {{ with $description }}
<meta name="description" content="{{ . | plainify | truncate 160 }}" />
{{ end }} {{ with .Site.Params.author }}
<meta name="author" content="{{ . }}" />
{{ end }} {{ with .Site.Params.keywords }}
<meta name="keywords" content="{{ . }}" />
{{ end }}

<meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ printf "%s · %s" .Title .Site.Title }}{{ end }}" />
<meta
    property="og:description"
    content="{{ $description | plainify | truncate 160 }}"
/>
<meta
    property="og:type"
    content="{{ if .IsPage }}article{{ else }}website{{ end }}"
/>
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:site_name" content="{{ .Site.Title }}" />
{{ with .Params.cover }}{{ with $.Resources.GetMatch . }} {{ $og := .Fill
"1200x630 Center webp q80" }}
<meta property="og:image" content="{{ $og.Permalink }}" />
{{ end }}{{ end }}

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ printf "%s · %s" .Title .Site.Title }}{{ end }}" />
<meta
    name="twitter:description"
    content="{{ $description | plainify | truncate 160 }}"
/>
{{ with .Params.cover }}{{ with $.Resources.GetMatch . }} {{ $twitter := .Fill
"1200x630 Center webp q80" }}
<meta name="twitter:image" content="{{ $twitter.Permalink }}" />
{{ end }}{{ end }}

<link rel="canonical" href="{{ .Permalink }}" />

{{/* JSON-LD Structured Data */}}
{{ if .IsHome }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "{{ .Site.Params.author }}",
  "url": "{{ .Site.BaseURL }}",
  "jobTitle": "{{ .Site.Params.jobTitle }}",
  "worksFor": {
    "@type": "Organization",
    "name": "{{ .Site.Params.employer }}",
    "url": "{{ .Site.Params.employerUrl }}"
  },
  "sameAs": [
    "{{ .Site.Params.githubUrl }}",
    "{{ .Site.Params.linkedinUrl }}",
    "{{ .Site.Params.stravaUrl }}"
  ]
}
</script>
{{ else if and .IsPage (eq .Section "posts") }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ .Title }}",
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  {{ with .Lastmod }}"dateModified": "{{ .Format "2006-01-02T15:04:05Z07:00" }}",{{ end }}
  "url": "{{ .Permalink }}",
  "description": "{{ $description | plainify | truncate 160 }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}",
    "url": "{{ .Site.BaseURL }}"
  },
  "publisher": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}",
    "url": "{{ .Site.BaseURL }}"
  }
}
</script>
{{ end }}
